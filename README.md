# TestPerformanceStringPool
Performance comparsion of Dictionary vs ConcurrentDictionary vs Intern vs StringPool

``` ini

BenchmarkDotNet=v0.13.5, OS=Windows 10 (10.0.19045.2604/22H2/2022Update)
12th Gen Intel Core i9-12900, 1 CPU, 24 logical and 16 physical cores
.NET SDK=5.0.416
  [Host]     : .NET 5.0.17 (5.0.1722.21314), X64 RyuJIT AVX2
  DefaultJob : .NET 5.0.17 (5.0.1722.21314), X64 RyuJIT AVX2


```
|               Method | StringLength |        Mean |     Error |    StdDev |    Gen0 |    Gen1 |    Gen2 | Allocated |
|--------------------- |------------- |------------:|----------:|----------:|--------:|--------:|--------:|----------:|
|           **StringPool** |           **10** |    **693.8 μs** |   **3.46 μs** |   **3.07 μs** | **41.0156** | **41.0156** | **41.0156** | **331.61 KB** |
|               Intern |           10 |    430.9 μs |   6.68 μs |   8.92 μs | 41.5039 | 41.5039 | 41.5039 |  256.3 KB |
| ConcurrentDictionary |           10 |    277.4 μs |   5.41 μs |   6.64 μs | 41.5039 | 41.5039 | 41.5039 | 529.51 KB |
|           Dictionary |           10 |    173.6 μs |   0.65 μs |   0.55 μs | 41.5039 | 41.5039 | 41.5039 | 356.13 KB |
|           **StringPool** |          **100** |    **894.0 μs** |  **13.55 μs** |  **12.68 μs** | **41.0156** | **41.0156** | **41.0156** | **331.61 KB** |
|               Intern |          100 |  1,952.3 μs |   8.74 μs |   7.75 μs | 41.0156 | 41.0156 | 41.0156 |  256.3 KB |
| ConcurrentDictionary |          100 |    705.3 μs |   5.74 μs |   5.37 μs | 41.0156 | 41.0156 | 41.0156 | 521.59 KB |
|           Dictionary |          100 |    308.2 μs |   0.95 μs |   0.89 μs | 41.5039 | 41.5039 | 41.5039 | 356.13 KB |
|           **StringPool** |         **1000** |  **2,177.1 μs** |   **3.87 μs** |   **3.62 μs** | **39.0625** | **39.0625** | **39.0625** | **331.61 KB** |
|               Intern |         1000 | 16,782.6 μs |  78.87 μs |  73.78 μs | 31.2500 | 31.2500 | 31.2500 | 256.31 KB |
| ConcurrentDictionary |         1000 |  5,373.7 μs | 101.43 μs | 172.23 μs | 39.0625 | 39.0625 | 39.0625 | 522.85 KB |
|           Dictionary |         1000 |  1,983.4 μs |   7.21 μs |   6.75 μs | 39.0625 | 39.0625 | 39.0625 | 356.13 KB |


``` ini

BenchmarkDotNet=v0.13.5, OS=Windows 10 (10.0.19045.2604/22H2/2022Update)
12th Gen Intel Core i9-12900, 1 CPU, 24 logical and 16 physical cores
.NET SDK=5.0.416
  [Host]     : .NET 5.0.17 (5.0.1722.21314), X64 RyuJIT AVX2
  DefaultJob : .NET 5.0.17 (5.0.1722.21314), X64 RyuJIT AVX2


```
|               Method | StringLength | Parallelism |      Mean |     Error |    StdDev |     Gen0 |     Gen1 |     Gen2 | Allocated |
|--------------------- |------------- |------------ |----------:|----------:|----------:|---------:|---------:|---------:|----------:|
|           **StringPool** |           **10** |           **2** |  **9.246 ms** | **0.0346 ms** | **0.0307 ms** | **500.0000** | **484.3750** | **484.3750** |   **2.08 MB** |
|               Intern |           10 |           2 |  8.848 ms | 0.0588 ms | 0.0550 ms | 500.0000 | 484.3750 | 484.3750 |      2 MB |
| ConcurrentDictionary |           10 |           2 |  1.778 ms | 0.0135 ms | 0.0120 ms | 482.4219 | 472.6563 | 453.1250 |   2.19 MB |
|           **StringPool** |           **10** |           **4** |  **5.294 ms** | **0.0468 ms** | **0.0390 ms** | **445.3125** | **429.6875** | **414.0625** |   **2.08 MB** |
|               Intern |           10 |           4 | 16.356 ms | 0.0772 ms | 0.0722 ms | 468.7500 | 437.5000 | 437.5000 |      2 MB |
| ConcurrentDictionary |           10 |           4 |  1.156 ms | 0.0228 ms | 0.0368 ms | 322.2656 | 308.5938 | 269.5313 |   2.28 MB |
|           **StringPool** |           **10** |           **8** |  **3.449 ms** | **0.0547 ms** | **0.0485 ms** | **191.4063** | **187.5000** | **117.1875** |   **2.08 MB** |
|               Intern |           10 |           8 | 21.740 ms | 0.0987 ms | 0.0923 ms |  93.7500 |  93.7500 |  62.5000 |      2 MB |
| ConcurrentDictionary |           10 |           8 |  1.264 ms | 0.0251 ms | 0.0725 ms | 189.4531 | 150.3906 |  99.6094 |   2.28 MB |
|           **StringPool** |           **10** |          **16** |  **3.080 ms** | **0.0064 ms** | **0.0060 ms** | **164.0625** |  **82.0313** |  **39.0625** |    **2.2 MB** |
|               Intern |           10 |          16 | 67.009 ms | 0.4659 ms | 0.4358 ms | 125.0000 | 125.0000 | 125.0000 |   2.32 MB |
| ConcurrentDictionary |           10 |          16 |  1.035 ms | 0.0205 ms | 0.0365 ms | 187.5000 | 109.3750 |  56.6406 |   2.42 MB |
|           **StringPool** |          **500** |           **2** | **13.023 ms** | **0.0518 ms** | **0.0460 ms** | **500.0000** | **484.3750** | **484.3750** |   **2.08 MB** |
|               Intern |          500 |           2 | 45.618 ms | 0.3636 ms | 0.3401 ms | 454.5455 | 454.5455 | 454.5455 |      2 MB |
| ConcurrentDictionary |          500 |           2 | 14.132 ms | 0.0847 ms | 0.0751 ms | 515.6250 | 500.0000 | 484.3750 |   2.26 MB |
|           **StringPool** |          **500** |           **4** |  **7.095 ms** | **0.0724 ms** | **0.0641 ms** | **429.6875** | **414.0625** | **398.4375** |   **2.08 MB** |
|               Intern |          500 |           4 | 24.045 ms | 0.0470 ms | 0.0417 ms | 437.5000 | 437.5000 | 406.2500 |      2 MB |
| ConcurrentDictionary |          500 |           4 |  7.625 ms | 0.0375 ms | 0.0351 ms | 421.8750 | 406.2500 | 382.8125 |   2.19 MB |
|           **StringPool** |          **500** |           **8** |  **4.739 ms** | **0.0881 ms** | **0.0825 ms** | **179.6875** | **148.4375** | **109.3750** |   **2.08 MB** |
|               Intern |          500 |           8 | 37.466 ms | 0.2342 ms | 0.2191 ms | 142.8571 | 142.8571 | 142.8571 |    2.1 MB |
| ConcurrentDictionary |          500 |           8 |  5.135 ms | 0.0520 ms | 0.0435 ms | 164.0625 | 117.1875 |  85.9375 |   2.27 MB |
|           **StringPool** |          **500** |          **16** |  **3.495 ms** | **0.0041 ms** | **0.0036 ms** | **179.6875** |  **97.6563** |  **39.0625** |    **2.2 MB** |
|               Intern |          500 |          16 | 44.519 ms | 0.8435 ms | 0.7890 ms |  83.3333 |  83.3333 |  83.3333 |   2.37 MB |
| ConcurrentDictionary |          500 |          16 |  3.481 ms | 0.0076 ms | 0.0071 ms | 179.6875 |  97.6563 |  39.0625 |    2.4 MB |

